(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{229:function(t,e,n){"use strict";n.r(e);var s=n(0),a=n.n(s),o=n(67),i=n.n(o),u=(n(75),n(24)),r=n(69),c=n(8),l=n(9),p=n(12),h=n(10),d=n(1),m=n(11),v=function(t){function e(t){var n;return Object(c.a)(this,e),(n=Object(p.a)(this,Object(h.a)(e).call(this,t))).state={value:""},n.handleChange=n.handleChange.bind(Object(d.a)(n)),n}return Object(m.a)(e,t),Object(l.a)(e,[{key:"handleChange",value:function(t){this.setState({value:t.target.value})}},{key:"renderInput",value:function(){return"input"===this.props.type?a.a.createElement("div",{className:"".concat(this.props.type,"-container")},a.a.createElement("input",{name:this.props.instance,className:"".concat(this.props.type,"  "),value:this.state.value,onChange:this.handleChange,onKeyUp:this.props.onKeyUp,placeholder:this.props.placeholder})):"text-area"===this.props.type?a.a.createElement("div",{className:"".concat(this.props.type,"-container")},a.a.createElement("textarea",{value:this.state.value,name:this.props.instance,onKeyUp:this.props.onKeyUp,placeholder:this.props.placeholder,className:this.props.type,onChange:this.handleChange})):"checkbox"===this.props.type?a.a.createElement("div",{className:"".concat(this.props.type,"-container")},a.a.createElement("input",{type:this.props.type,name:this.props.instance,className:"".concat(this.props.type),value:this.props.value})):void 0}},{key:"render",value:function(){return a.a.createElement(a.a.Fragment,null,this.renderInput())}}]),e}(s.Component);var C=function(t){return a.a.createElement("button",{className:"".concat(t.className),onClick:t.onClick},t.text)};var f=function(t){return a.a.createElement("div",{className:"icon-container-".concat(t.i," icon-container"),onClick:function(e){t.onClick(e)}},a.a.createElement("i",{className:"fa fa-".concat(t.type," icon"),"aria-hidden":"true"}))};var y=function(t){if(!t.questions)return"";function e(t){if(t.questions&&t.questions.options)return Object.entries(t.questions.options)}return a.a.createElement("div",{className:"options-preview-conatainer"},e(t)?(n=e(t),"input"===t.instance?n.map(function(e,n){return a.a.createElement("div",{className:"option-preview-".concat(e[0]," option-preview ").concat(t.instance),key:e[0]},a.a.createElement("div",{className:"option-text"},e[1]),a.a.createElement(f,{type:"trash",onClick:t.onClick,i:e[0]}))}):"output"===t.instance?n.map(function(e,n){return a.a.createElement("div",{className:"option-output-".concat(e[0]," ").concat(t.instance),key:e[0]},a.a.createElement(v,{type:"checkbox",instance:"question-options-output-".concat(n+1),value:e[1]}),a.a.createElement("div",{className:"options-output-text"},e[1]))}):void 0):null);var n},b=n(4),k=n.n(b),q=n(68),O=n.n(q),g=function(t){function e(t){var n;return Object(c.a)(this,e),(n=Object(p.a)(this,Object(h.a)(e).call(this,t))).state={questionCount:0,questionsMarkup:[],optionsCount:{},buttonText:{addQuestion:"ADD QUESTION",delete:"DELETE QUESTION",addOption:"ADD OPTION"},currentQuestion:0},n.handleClick=n.handleClick.bind(Object(d.a)(n)),n.handleUpstreamOptions_debounce=n.handleUpstreamOptions_debounce.bind(Object(d.a)(n)),n.handleKeyup=n.handleKeyUp.bind(Object(d.a)(n)),n.handleUpstreamOptions_debounce=O.a.debounce(n.handleUpstreamOptions_debounce,1e3),n}return Object(m.a)(e,t),Object(l.a)(e,[{key:"handleFocus",value:function(t){this.manageCurrentQuestion(t)}},{key:"handleKeyUp",value:function(t){this.handleUpstreamOptions_debounce(t)}},{key:"handleClick",value:function(t){var e=this;t&&t.target.innerHTML===this.state.buttonText.addQuestion?(this.addQuestionInput(t),this.manageCurrentQuestion(t),this.handleUpstreamOptions_debounce(t),t.persist(),setTimeout(function(){e.props.onClick({e:t,questionCount:e.state.questionCount,buttonText:e.state.buttonText})})):t.target.innerHTML===this.state.buttonText.delete?(this.props.onClick({e:t,questionCount:this.state.questionCount,buttonText:this.state.buttonText}),this.deleteQuestionInput(t),this.manageCurrentQuestion(t)):t&&t.target.innerHTML===this.state.buttonText.addOption&&(t.persist(),this.handleUpstreamOptions_NO_debounce(t))}},{key:"handleUpstreamOptions_debounce",value:function(t){var e=this;t.persist(),this.incrementOptionsCount(t),setTimeout(function(){e.props.onKeyUp({e:t,optionsCount:e.state.optionsCount})})}},{key:"handleUpstreamOptions_NO_debounce",value:function(t){var e=this;t.persist(),this.incrementOptionsCount(t),setTimeout(function(){e.props.onClick({e:t,optionsCount:e.state.optionsCount,buttonText:e.state.buttonText})})}},{key:"incrementOptionsCount",value:function(t){var e=this.state.currentQuestion;function n(t){if(t.props.optionsCount[e]){if(t.props.optionsCount[e]){var n=k()(t.props.optionsCount);n[e]++,t.setState({optionsCount:n})}}else{var s=k()(t.props.optionsCount);s[e]=1,t.setState({optionsCount:s})}}t.target&&t.target.name.includes("question-options")?n(this):t.target&&"BUTTON"===t.target.tagName&&t.target.innerHTML===this.state.buttonText.addOption&&n(this)}},{key:"renderQuestionMarkup",value:function(t){var e=this;return a.a.createElement("div",{className:"question-".concat(t+1," question"),key:t,onFocus:this.handleFocus.bind(this)},a.a.createElement(v,{type:"input",instance:"question-input-".concat(t+1),placeholder:"Question",onKeyUp:this.props.onKeyUp}),a.a.createElement(v,{type:"input",instance:"question-description-".concat(t+1),placeholder:"Question Description (Optional)",onKeyUp:this.props.onKeyUp}),a.a.createElement(v,{type:"input",instance:"question-options-".concat(t+1),placeholder:"Add Options",onKeyUp:function(t){t.persist(),e.handleKeyup(t)}}),a.a.createElement(y,{questions:this.props.questions?this.props.questions[t]:null,onClick:this.props.onClick,instance:"input"}))}},{key:"deleteQuestionInput",value:function(){var t=this;setTimeout(function(){t.setState({questionsMarkup:Array.from({length:t.props.questionCount},function(t,e){return e})})},100)}},{key:"addQuestionInput",value:function(){var t=this;this.setState({questionCount:this.props.questionCount+1}),setTimeout(function(){t.setState({questionsMarkup:Array.from({length:t.props.questionCount},function(t,e){return e})})},100)}},{key:"renderFormMarkUp",value:function(){return a.a.createElement("div",{className:"title-form"},a.a.createElement(v,{instance:"title-input",type:"input",placeholder:"Title",onKeyUp:this.props.onKeyUp}),a.a.createElement(v,{type:"text-area",instance:"title-text-area",placeholder:"Form Description",onKeyUp:this.props.onKeyUp}))}},{key:"manageCurrentQuestion",value:function(t){var e,n=this,s=t.target.name.slice(-1);setTimeout(function(){s?s&&s<=n.props.questionCount?e=s:n.props.questionCount<s&&(e=n.props.questionCount):e=n.props.questionCount,n.setState({currentQuestion:e}),n.props.onFocus({e:t,currentQuestion:e})},100)}},{key:"renderUserInput",value:function(){var t=this;return a.a.createElement("div",{className:"input-form"},this.renderFormMarkUp(),a.a.createElement("div",{className:"questions-container ".concat(this.state.questionsMarkup.length?"active":"")},this.state.questionsMarkup.map(function(e,n){return t.renderQuestionMarkup(n)}),a.a.createElement("div",{className:"input-button-container"},a.a.createElement(C,{className:"addOption",text:"".concat(this.state.buttonText.addOption),onClick:this.handleClick}),a.a.createElement(C,{className:"deleteQuestion",text:"".concat(this.state.buttonText.delete),onClick:this.handleClick}),a.a.createElement(C,{className:"addQuestion",text:"".concat(this.state.buttonText.addQuestion),onClick:this.handleClick}))))}},{key:"render",value:function(){return a.a.createElement(a.a.Fragment,null,this.renderUserInput())}}]),e}(a.a.Component),E=n(146);var Q=function(t){return a.a.createElement("div",{className:"output-form"},a.a.createElement("div",{className:"output-form-header"},a.a.createElement("div",{className:"output-title"},a.a.createElement("h1",null,t.formTitle)),a.a.createElement("div",{className:"viewer-paragraph"},a.a.createElement(E,{source:t.formDescription}))),a.a.createElement("div",{className:"output-questions-canvas"},t.questions?t.questions.map(function(t,e){return a.a.createElement("div",{className:"question",key:e},a.a.createElement("h3",null,t.text),a.a.createElement("p",null,t.description),a.a.createElement(y,{questions:t,instance:"output"}))}):null))},N=function(t){function e(t){var n;return Object(c.a)(this,e),(n=Object(p.a)(this,Object(h.a)(e).call(this,t))).state={questions:{},questionCount:0,optionsCount:{},currentQuestion:0},n.handleClick=n.handleClick.bind(Object(d.a)(n)),n.handleKeyUp=n.handleKeyUp.bind(Object(d.a)(n)),n.makeQuestionsArray=n.makeQuestionsArray.bind(Object(d.a)(n)),n.handleFocus=n.handleFocus.bind(Object(d.a)(n)),n}return Object(m.a)(e,t),Object(l.a)(e,[{key:"createNewBlankQuestion",value:function(t){var e=k()(this.state.questions);return e[t]={id:this.state.questionCount},e}},{key:"checkForClass",value:function(t,e){var n=Object(r.a)(t),s=!0,a=!1,o=void 0;try{for(var i,u=n[Symbol.iterator]();!(s=(i=u.next()).done);s=!0){if(i.value.includes(e))return!0}}catch(c){a=!0,o=c}finally{try{s||null==u.return||u.return()}finally{if(a)throw o}}return!1}},{key:"handleClick",value:function(t){if(t.e&&t.e.target.innerHTML===t.buttonText.addQuestion){this.setState({questionCount:t.questionCount});var e=this.state.questionCount;if(!this.state.questions[e]){var n=this.createNewBlankQuestion(e);this.setState({questions:n})}}else t.e&&t.e.target.innerHTML===t.buttonText.delete?this.deleteQuestion(t):t.target&&this.checkForClass(t.target.classList,"icon-container")?this.deleteOptionFromQuestion(t):t.e.target&&t.e.target.innerHTML===t.buttonText.addOption&&(this.setState({optionsCount:t.optionsCount}),this.updateQuestions(t.e,"options-button"))}},{key:"handleKeyUp",value:function(t){t&&!t.target?t.e.target&&t.e.target.name.includes("question-options")&&(this.setState({optionsCount:t.optionsCount}),this.updateQuestions(t.e,"options-debounce")):t.target&&("title-input"===t.target.name?this.setState({formTitle:t.target.value}):"title-text-area"===t.target.name?(console.log(t.target.value),console.log(t.target.value.includes("\n")),this.setState({formDescription:t.target.value})):t.target.name.includes("question-input")?this.updateQuestions(t,"text"):t.target.name.includes("question-description")&&this.updateQuestions(t,"description"))}},{key:"deleteOptionFromQuestion",value:function(t){var e=t.target.parentNode.parentNode.parentNode,n=parseInt(e.classList[0].slice(-1)),s=parseInt(t.target.classList[0].slice(-1)),a=k()(this.state.questions),o=a[n];delete o.options[s],this.setState({questions:a}),this.decrementOptionsCount(o)}},{key:"decrementOptionsCount",value:function(t){var e=k()(this.state.optionsCount);e[this.state.currentQuestion]>0&&e[this.state.currentQuestion]--,this.setState({optionsCount:e})}},{key:"deleteQuestion",value:function(){var t=this.state.currentQuestion,e=k()(this.state.questions);delete e[t];var n=this.state.questionCount?this.state.questionCount-1:0;this.setState({questionCount:n,questions:e})}},{key:"updateQuestions",value:function(t,e){if("text"===e||"description"===e){var n=this.state.currentQuestion,s=k()(this.state.questions);s[n]?s[n][e]=t.target.value:s[n]=Object(u.a)({},e,t.target.value),this.setState({questions:s})}else if("options-debounce"===e||"options-button"===e){var a=this.state.currentQuestion,o=k()(this.state.questions);if("options-debounce"===e){if(" "===t.target.value||""===t.target.value)return;if(o[a].options){if(o[a].options){var i=this.state.optionsCount[this.state.currentQuestion];o[a].options[i]=t.target.value,this.setState({questions:o})}}else o[a].options=Object(u.a)({},this.state.optionsCount[a],t.target.value),this.setState({questions:o})}else if("options-button"===e){if(0===Object.entries(this.state.questions).length)return void console.error("No questions created. Cannot create options.");if(o[a].options){if(o[a].options){var r=this.state.optionsCount[this.state.currentQuestion];o[a].options[r]="Option ".concat(this.state.optionsCount[this.state.currentQuestion]),this.setState({questions:o})}}else o[a].options=Object(u.a)({},this.state.optionsCount[a],"Option ".concat(this.state.optionsCount[this.state.currentQuestion])),this.setState({questions:o})}}}},{key:"makeQuestionsArray",value:function(){if(this.state.questions){var t=Object.values(this.state.questions);return t||null}}},{key:"manageCurrentQuestion",value:function(t){this.setState({currentQuestion:parseInt(t.currentQuestion)})}},{key:"handleFocus",value:function(t){this.manageCurrentQuestion(t)}},{key:"render",value:function(){return a.a.createElement("main",{className:"cols main"},a.a.createElement("div",{className:"row"},a.a.createElement("div",{className:"col"},a.a.createElement(g,{onFocus:this.handleFocus.bind(this),onKeyUp:this.handleKeyUp,onClick:this.handleClick,questions:this.makeQuestionsArray(),questionCount:this.state.questionCount,optionsCount:this.state.optionsCount})),a.a.createElement("div",{className:"col"},a.a.createElement(Q,{formTitle:this.state.formTitle,formDescription:this.state.formDescription,textAreaValue:this.state.textAreaValue,questions:this.makeQuestionsArray()}))))}}]),e}(a.a.Component);var T=function(){return a.a.createElement("div",{className:"App"},a.a.createElement(N,null))};i.a.render(a.a.createElement(T,null),document.getElementById("root"))},70:function(t,e,n){t.exports=n(229)},75:function(t,e,n){}},[[70,1,2]]]);
//# sourceMappingURL=main.b66cb61e.chunk.js.map